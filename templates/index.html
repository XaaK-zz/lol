{% extends "base.html" %}

{% block title %}Leet or Lame } {% endblock %}
{% load staticfiles %}

{% block active_random %}active{% endblock %}
{% block onload %}onload="prettyPrint()"{% endblock %}

{% block eofjavascript %}

<script type="text/javascript" src="{% static 'js/lang-css.js' %}"></script>
<script type="text/javascript" src="{% static 'js/lang-go.js' %}"></script>
<script type="text/javascript" src="{% static 'js/lang-hs.js' %}"></script>
<script type="text/javascript" src="{% static 'js/lang-lisp.js' %}"></script>
<script type="text/javascript" src="{% static 'js/lang-scala.js' %}"></script>
<script type="text/javascript" src="{% static 'js/lang-sql.js' %}"></script>

<script type="text/javascript">
    $(document).ready(function(){
        $('#leetButton').click(function(){
            $("#hiddenValue").val(1);
            $("#mainForm").submit();
        });
    });
    
    $(document).ready(function(){
        $('#lameButton').click(function(){
            $("#hiddenValue").val(-1);
            $("#mainForm").submit();
        });
    });

    $(document).ready(function() {
        $('#mainForm').submit(function() { 
            $.ajax({ 
                data: $(this).serialize(),
                type: $(this).attr('method'), 
                url: $(this).attr('action'), 
                success: function(response) { 
                    location.reload(true);
                },
                error: function(e, x, r) { // on error..
                   location.reload(true);
                }
            });
            return false;
        });
    });
</script>

{% endblock %}
 
{% block content %}

    {% if thanks %}
    <div class="container">
        <div class="row">
            <div class="span2"></div>
            <div class="span8">
                <div class="alert alert-success">
                  <a href="#" class="close" data-dismiss="alert">&times;</a>
                  Thanks for adding new code to the system.<br>
                  Come back soon to vote for it!
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <div class="row-fluid">
        <div class="span2"></div>
        <div class="span6">  
            <div class="description">
                {{ snippet.description}}&nbsp;&nbsp;({{ snippet.language.name}})<br>
                <small>Leetness: {{ snippet.score }}</small></div>
        </div>
        <div class="span2">
            <br><div class="text-right"><a href="{% url "view" snippet.id %}">Share this code</a></div>
        </div>
    </div>
    <form action="{% url "index" %}" method="post" id="mainForm">
        {% csrf_token %}
        <input type="hidden" name="snippet_id" value="{{ snippet.id }}" />
        <input type="hidden" name="value" value="" id="hiddenValue" />
        <div class="row-fluid">
            <div class="span2 pagination-centered">
                    <button class="btn btn-danger btn-large" type="button" value="Lame" style="margin-left: auto;
    margin-right: auto;" id="lameButton">Lame</button>
            </div>
            <div class="span8">
                <pre class="prettyprint"><code class="{{ snippet.language.language_class}}">{{ snippet.code }}</code></pre>
            </div>
            <div class="span2 pagination-centered">
                    <button class="btn btn-success btn-large" type="button" value="Leet" id="leetButton">&nbsp;Leet&nbsp;</button>
            </div>
        </div>
        <div class="row-fluid">
            <div class="span5 offset2">
                <small>Submitted on {{ snippet.submitDate|date:"F d, Y"}} by {{snippet.userName}}</small>
            </div>
            <div class="span3">
                <div class="text-right"><small>{% if snippet.attribution %}{{ snippet.attribution}}{% endif %}</small></div>
            </div>
        </div>
    </form>
{% endblock %}


